{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAUMC,EAAaC,SAASC,cAAc,gBACpCC,EAAUF,SAASC,cAAc,YACjCE,EAAUH,SAASC,cAAc,aAGnCG,EAAW,EAEXC,EAAa,GACbC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,cAK5BC,EAAW,IAAIC,sBAgCrB,SAAyBC,GACrBA,EAAQC,SAAQ,SAACC,GACbC,QAAQC,IAAIF,GACRA,EAAMG,iBACNZ,GAAY,GAEZ,EAAAa,EAAAC,YAAWd,EAAUC,GAAYc,MAAK,SAACC,GAE5C,IAAMC,GAAS,EAAAxB,EAAAyB,oBAAmBF,EAASG,KAAKC,MACjDtB,EAAQuB,mBAAmB,YAAaJ,GACxCf,EAASoB,UAEKN,EAASG,KAAKI,WAAazB,EAAQ0B,SAASC,SACpDtB,EAAAuB,GAASC,OAAOC,KAAK,8DACrBvB,EAASwB,UAAU9B,G,IAG1B+B,OAAM,SAACC,G,OAAM5B,EAAAuB,GAASC,OAAOK,QAAQ,2E,UApD1B,CACdC,WAAY,UAKWtC,EAAduC,iBAAiB,UAE5B,SAA4BC,GAMkB,GAL1CA,EAAIC,iBACoBtC,EAAhBuC,UAAU,GACGpC,EAAVkC,EAAIG,OAAOC,SAAS,GAAGC,MACrBxC,EAAH,EAEU,KAAhBC,GAAuC,MAAfA,EAE5B,OADAH,EAAQuC,UAAY,GACblC,EAAAuB,GAASC,OAAOK,QAAS,mCAMlC,EAAAnB,EAAAC,YAAWd,EAAUC,GAAYc,MAAK,SAACC,GAErC,GAAIA,EAASG,KAAKI,WAAa,EAAG,CAChCpB,EAAAuB,GAASC,OAAOc,QAAQ,oBAA4CC,OAAxB1B,EAASG,KAAKI,UAAU,aACnE,IAAMN,GAAS,EAAAxB,EAAAyB,oBAAmBF,EAASG,KAAKC,MACjDtB,EAAQuB,mBAAmB,YAAaJ,GACxCf,EAASoB,UACPjB,EAASsC,QAAQ5C,E,KAGpB+B,OAAM,SAACC,G,OAAM5B,EAAAuB,GAASC,OAAOK,QAAQ,2E","sources":["src/js/infiniti-scroll.js"],"sourcesContent":["import {createMarkupInList} from './createMarkup'\n// import axios from \"axios\";\nimport {fetchCards} from './load-more/fetchAPI-LMore'\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport '../css/style.css'\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst guardEl = document.querySelector('.js-guard');\n\nconst perPage = 40;\nlet currPage = 1;\nexport {perPage}\nlet valueInput = '';\nlet lightbox = new SimpleLightbox('.gallery a');\n\nconst options = {\n  rootMargin: \"500px\",\n};\nconst observer = new IntersectionObserver(handlerLoadMore, options);\n\n// слухач подій на запит по слову\nsearchForm.addEventListener('submit', handlerClickOnForm);\n\nfunction handlerClickOnForm(evt) {\n    evt.preventDefault();//відміна перезагру сторінки\n    gallery.innerHTML=''; // зачистка при новому пошуку\n  valueInput = evt.target.elements[0].value; // те що ввів клієнт\n   currPage = 1; // При новому пошуку повертаємося на першу сторінку\n   \n    if ((valueInput === '') || (valueInput === ' ')) {\n    gallery.innerHTML = '';\n    return Notiflix.Notify.warning(`Sorry, you must enter a value.`);\n  }\n    fetchData()    //  запит на API\n}\n\nfunction fetchData() {\n  fetchCards(currPage, valueInput).then((dataResp) => {\n\n    if (dataResp.data.totalHits >= 1) {\n      Notiflix.Notify.success(`Hooray! We found ${dataResp.data.totalHits} images.`);\n       const markup = createMarkupInList(dataResp.data.hits);\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n        observer.observe(guardEl);\n    }\n  })\n    .catch((_) => Notiflix.Notify.warning('Sorry, there are no images matching your search query. Please try again.'))\n}\n\nfunction handlerLoadMore(entries) {\n    entries.forEach((entry) => { \n        console.log(entry);\n        if (entry.isIntersecting) {\n            currPage += 1;\n          \n            fetchCards(currPage, valueInput).then((dataResp) => {\n\n       const markup = createMarkupInList(dataResp.data.hits);\n      gallery.insertAdjacentHTML('beforeend', markup);\n      lightbox.refresh();\n\n                if (dataResp.data.totalHits <= gallery.children.length) {\n            Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\")\n            observer.unobserve(guardEl);\n                };\n  })\n    .catch((_) => Notiflix.Notify.warning('Sorry, there are no images matching your search query. Please try again.'))\n\n        }\n    })\n}"],"names":["$9XBOy","parcelRequire","$c6b405435e09e54e$var$searchForm","document","querySelector","$c6b405435e09e54e$var$gallery","$c6b405435e09e54e$var$guardEl","$c6b405435e09e54e$var$currPage","$c6b405435e09e54e$var$valueInput","$c6b405435e09e54e$var$lightbox","$parcel$interopDefault","$5IjG7","$c6b405435e09e54e$var$observer","IntersectionObserver","entries","forEach","entry","console","log","isIntersecting","$4rJx5","fetchCards","then","dataResp","markup","createMarkupInList","data","hits","insertAdjacentHTML","refresh","totalHits","children","length","$6JpON","Notify","info","unobserve","catch","_","warning","rootMargin","addEventListener","evt","preventDefault","innerHTML","target","elements","value","success","concat","observe"],"version":3,"file":"infiniti-scroll.ea2fe2e4.js.map"}